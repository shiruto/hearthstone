# Hearthstone

用Unity3D独立制作炉石传说

## Former

使用`Animation`+`Animation Controller`代替了原本的[FadeAnim.cs](./Assets/Scripts/Abandon/FadeAnim.cs)

## update-03-08

用委托/任务+动画事件优化了原有的[PlayAnim.cs](./Assets/Scripts/Abandon/PlayAnim.cs)和[SceneChange.cs](./Assets/Scripts/SceneChange.cs)

原有函数是在`Update()`中不断检查Animator的播放状态来判断动画是否播放完毕 若完毕则对`TxtStart`的`Trigger`和`BtnChangeScene`的`interactable`直接进行操作

更新后的脚本则是通过事件`OnFinish`完成 在本地动画播放完后 调用`OnFInish`的`Invoke()`方法来触发所有需要有操作的物体 再在各自的脚本中实现各自的处理方式

## update-03-09

使用射线检测完成了对鼠标到底在哪个物体上的判断

将昨天的实例事件换成了静态事件 但并不知道各自的优缺点 不过至少静态事件不需要实例化目标类了

实现了卡牌使用后会销毁UI中卡牌的功能

初步实现了对手牌进行排列和重命名的方法`Align()` 但排列仍需优化

## update-03-11

实现了卡牌库数据的录入 现在所有卡牌都可以在收藏中正常浏览了

## Update-03-12

实现了卡牌库按职业筛选的功能

实现了在构筑界面修改套牌

实现了构筑界面卡组中的滑动条

使用Scriptable Object保存的套牌数据

实现了新建套牌 仍需实现套牌列表的刷新

## Update-03-14

实现套牌列表正常读写 但还不可以删除

## Update-03-16

可以正常删除卡牌了

重构了大部分代码 产生了大量 bug

编程工具从 Visual Studio 变为 Visual Studio Code

## Update-03-17

卡组增加了职业限制

## Update-03-18

卡牌构筑界面基本功能全部实现 修复了绝大多数重构产生的 bug 

## Update-03-19

构筑界面可以预览卡牌了

构筑界面显示卡牌页数

构筑界面右键已选中卡牌可以快速跳转到卡牌

构筑时可以在选卡面板中实时显示已选数量

新建卡组界面优化了流程 增加了确定按钮

制作了曲线素材

手牌中的卡可以预览了

## Update-03-20

重写了 drag 类

## Update-03-24

正在将游戏的逻辑与视图分开 并用消息系统来链接 

逻辑部分已基本完成

消息部分完成 20%

对部分类使用了单例模式和工厂模式来优化设计

## Update-03-29

将手牌和战场的逻辑与视图连通

## Update-03-30

消息系统制作初步完成正在替换原有的委托形式

## Update-03-31

消息系统制作完成

Drag 类分解并调试成功

## Update-04-01

DeckSelect 场景可以读取文件中的卡组以及显示选中卡组了

实现了两张卡牌

## Update-04-05

重构卡牌的实现

从原先的每个卡牌一个单独类和一个 ScriptableObject 变为只有一个 ScriptableObject ,再用反射实现效果类 效果包括随从的战吼 亡语和法术的使用效果等 都由一个效果的列表和一个整数的列表构成 前者代表效果类型 后者代表效果数值

## Update-04-19

重构失败 卡牌仍由原本的单独类加 SO 组成 SO 负责记录数据 类负责具体实现

实现了回合管理 45 回合自动平局 每个回合开始自动增加水晶上限并重置法力值

实现了疲劳伤害

实现了指向性卡牌拖出手牌区时隐藏卡牌的功能

英雄 武器 技能视图初步实现

实现了初始选牌的功能

实现了二十张卡牌

将奥秘卡分成一个新的种类 并创建了奥秘视图

视图的更新统一使用事件系统实现 以便解耦合

初步实现了发现效果了 发现现在是一个接口了  正在 Debug

## Update-04-20

实现了水晶过载的逻辑

实现随从回手 (待测试)

水晶超出上限会获得一张法力过剩

## Update-04-22

修改了奥秘卡牌的基类 添加了三个抽象方法和一个虚方法 实现了奥秘的视图

卡牌回到开始位置的动画变为协程实现

出牌消耗水晶

实现了临时水晶

实现了发现效果

添加了攻击事件

将卡牌预览变为事件触发 减少重复代码

使用扩展方法优化了事件系统

## Update-04-28

实现了扳机的添加与移除

优化了卡牌的使用

将战吼和亡语变为了一个接口

随从能正常攻击了

指向性法术牌可以正常释放了

## Update-04-29

实现了武器的逻辑与视图

## Update-04-30

实现了 Buff 机制

## Update-05-01

实现了光环机制

随从预览时可以显示 Buff了

实现了免疫机制

实现了圣盾机制

## Update-05-02

制作了随从特殊属性相关的图标

实现了武器自身的攻击方法

实现了所有基础英雄技能 但仅测试了猎人

重写了卡牌与随从可以拖拽的逻辑

指向性战吼在没有可用目标时会直接召唤

## Update-05-03

实现了可拖拽的视图更新

修改了卡牌移动协程

实现了卡牌光效

箭头渲染变为使用协程实现 优化了触发渲染线条的时机

实现了 30 张卡牌

为英雄与武器添加了特殊属性图标

实现了合法目标判断以及圆圈的添加

优化了攻击次数消耗的时机

优化了光环随从的光环的生效时机

修复了嘲讽判断问题

为一些效果类添加了空值判断

修改了存储使用过卡牌的容器 使其可以同时管理卡牌使用的回合

## To-Do

需要确认游戏的各个时机以及流程

武器牌的耐久度图标

如何实现奥金妮女祭司类的卡牌

没有特殊效果的随从或武器使用对应的 Default类 实现

描述中的词条自动生成?

传说卡牌的框

各类卡牌的样式

重写伤害机制

死亡判定时机与原版炉石不同

不需要的监听记得取消

休眠

随从召唤位置

修改类中的属性位置 确认各属性初始化的时机 以及是否需要进行空值判断

卡牌预览分离成单独类 不要放在 UI 类里

各类图标

英雄牌实现

召唤随从效果的召唤位置选择

水晶过载视图

初始化时 英雄技能取决于职业

英雄技能实现

游戏结算场景

导入卡组时顺序似乎有点问题

目标选择时的 Target 渲染与否

shader

卡牌背部

卡牌特效

网络相关



